# geoSPATIAL.json
[
[<img src="../../docu/images/geoplacing.jpg" height="256"/>](https://youtube.com/shorts/6w4DJwMHewY)

## Description 

The [`settings.json`](../../samples/geo/settings.json) file for this geo data viz has been generated with [`georepgen.py`](georepgen.py). It uses the GeoPandas python library to generate a [map](https://service.metason.net/ar/content/viz/geoSPATIAL/map.png) of Switzerland from [`swissmap.json`](swissmap.json) with borders of the Swiss cantons.
The specification in [`settings.json`](../../samples/geo/settings.json) does 
includes inline data on costs of the swiss healthcare system per capita.
`datarepgen.py`generates all data reps and stores the result in [`viz.json`](https://service.metason.net/ar/content/viz/geoSPATIAL/viz.json).

The generated settings file includes data reps genereated by `georepgen.py` as auxiliary data reps (`auxReps`):
```json
    "auxReps": [
        {
            "type": "XZ",
            "x": 0,
            "y": 0,
            "z": 0,
            "w": 1.0,
            "d": 0.6386129613989837,
            "h": 0,
            "asset": "$SERVER/run/vis/map.png"
        },
        {
            "type": "lc",
            "x": -0.2,
            "y": 0,
            "z": 0.4674119352449464,
            "w": 0.6,
            "d": 0.11310545454545458,
            "h": 0,
            "asset": "$SERVER/run/vis/lc.png"
        }
    ]
```

Grouped bar chart spec:
```json
    "group": {
        "fields": [
            "ambulant",
            "stationary",
            "total"
        ],
        "colors": [
            "blue",
            "yellow",
            "black"
        ]
    },
```

In the ARchi app the [`geoSPATIAL.json`](ecoANIM.json) script does run a
spatial reasoning pipeline (according to the [Spatial Reasoner](https://github.com/metason/SpatialReasoner) framework) in order to find a table of size larger then 1.2 m2. A thin table top will be produced over the found table (by `produce(o)`) which serves as reference to place the SAXR data visualization.
```
adjust(sector fixed 0.01) | filter(type == 'table' AND footprint > 1.2) | produce(o)
```

## Items 

__1 'dataviz.placing'__  ðŸ”“
- Data.Viz
- https://service.metason.net/ar/content/viz/geoSPATIAL/viz.json



## Tasks 

 | on:command |  &rarr; | do:detect spatial|
 |---|---|---|
 > `adjust(sector fixed 0.01) | filter(type == 'table' AND footprint > 1.2) | produce(o)`
> 
> | _on:detect_ | &rarr; | _do:add to AR anchor_ |
> |---|---|---|
> 
>> 'dataviz.placing' âž•
> 
 

## References 

__Code Refs__

-  _SAXR spec_: [settings.json](../../samples/geo/settings.json) generated by `georepgen.py`
-  _ARchi script_: [geoSPATIAL.json](geoSPATIAL.json)

__Asset Refs__

- _Item asset:_ https://service.metason.net/ar/content/viz/geoSPATIAL/viz.json
- _Item asset:_ https://service.metason.net/ar/content/viz/geoSPATIAL/map.png
- _Item asset:_ https://service.metason.net/ar/content/viz/geoSPATIAL/xy.png
- _Item asset:_ https://service.metason.net/ar/content/viz/geoSPATIAL/-xy.png
- _Item asset:_ https://service.metason.net/ar/content/viz/geoSPATIAL/zy.png
- _Item asset:_ https://service.metason.net/ar/content/viz/geoSPATIAL/-zy.png
- _Item asset:_ https://service.metason.net/ar/content/viz/geoSPATIAL/lg.png
- _Item asset:_ https://service.metason.net/ar/content/viz/geoSPATIAL/lc.png

__Technology Refs__

- _Spatial Reasoner_: https://github.com/metason/SpatialReasoner
- _Technical Documentation :_ https://service.metason.net/ar/docu/
- _AR Pattern Diagram :_ https://github.com/ARpatterns/diagram
- _ARchi VR App :_ https://archi.metason.net
